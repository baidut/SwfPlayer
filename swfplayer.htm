<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head  xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">	<script src="http://code.jquery.com/jquery-1.4.2.min.js"></script>	<script type="text/javascript" src="swfobject.js"></script>	<script type="text/javascript" src="dom-drag.js"></script>	<script language="javascript">		<!--	var tick_interval;        //*** milliseconds between page refreshes	var ticks_per_second;     //*** calculated:  = 1000/tick_interval	var player_elapsed_seconds;    //*** seconds the player has played	var total_seconds;             //*** total seconds in the video	var swfobject;         //*** embedded Flash player object	var refr;              //*** switch ti indicate whether or not to refresh the page displays	var slider_back_width;      //*** with of the progress and load bar's container	var progress_bar_width_max; //*** max width of the progress and load bars (	var tempf;	var frames_per_pixel; //*** number of frames represented by one pixel of the progress bar	var pc_loaded;        //*** percent of the video loaded	function load_player()	{		//		//*** set up the embedded player using swfobject.js		//		var flashvars = {};		var params = {			autostart : "true",			menu: "true" ,			loop: "true" ,			allowscriptaccess: "always"		};		var attributes = {};		// 传入参数		// https://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters		// javascript: location.href = 'file:///E:/GitKraken/SwfPlayer/swfplayer.htm?url=' + location.href;		// file:///E:/GitKraken/SwfPlayer/swfplayer.htm?url=file:///E:/Downloads/English/GRE%20%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B/2%E3%80%81%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%20%E8%AF%BE%E6%97%B6%EF%BC%9A%2060%E8%AF%BE%E6%97%B6/6%E3%80%81%E5%86%99%E4%BD%9C%E5%9F%BA%E7%A1%80%20%E8%AE%B2%E5%B8%88%EF%BC%9A%E5%BC%A0%E9%9B%B7%E5%86%AC%20%E8%AF%BE%E6%97%B6%EF%BC%9A15/5_4%20%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB.swf		var url_string = location.href;		var url = new URL(url_string);		var fileLocation = url.searchParams.get("url"); // ?url=file:///E:/Downloads/English/GRE%20%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B/2%E3%80%81%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%20%E8%AF%BE%E6%97%B6%EF%BC%9A%2060%E8%AF%BE%E6%97%B6/6%E3%80%81%E5%86%99%E4%BD%9C%E5%9F%BA%E7%A1%80%20%E8%AE%B2%E5%B8%88%EF%BC%9A%E5%BC%A0%E9%9B%B7%E5%86%AC%20%E8%AF%BE%E6%97%B6%EF%BC%9A15/5_4%20%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB.swf		swfobject.embedSWF(fileLocation, "fout", "100%", "100%", "9.0.0","expressInstall.swf", flashvars, params, attributes);	}	$(function(){		//阻止浏览器默认行。		$(document).on({			dragleave:function(e){		//拖离				e.preventDefault();			},			drop:function(e){			//拖后放				e.preventDefault();			},			dragenter:function(e){		//拖进				e.preventDefault();			},			dragover:function(e){		//拖来拖去				e.preventDefault();			}		});				//================上传的实现		var box = document.getElementById('fout'); //拖拽区域 drop_area		box.addEventListener("drop",function(e){			e.preventDefault(); //取消默认浏览器拖拽效果			var fileList = e.dataTransfer.files; //获取文件对象			//检测是否是拖拽文件到页面的操作			if(fileList.length == 0){				return false;			}			//检测文件是不是图片			if(fileList[0].type.indexOf('image') === -1){				alert("您拖的不是图片！");				return false;			}						//拖拉图片到浏览器，可以实现预览功能			var img = window.webkitURL.createObjectURL(fileList[0]);			var filename = fileList[0].name; //图片名称			var filesize = Math.floor((fileList[0].size)/1024); 			if(filesize>500){				alert("上传大小不能超过500K.");				return false;			}			//alert(filesize);			var str = "<img src='"+img+"'><p>图片名称："+filename+"</p><p>大小："+filesize+"KB</p>";			$("#preview").html(str);						//上传			xhr = new XMLHttpRequest();			xhr.open("post", "upload.php", true);			xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");						var fd = new FormData();			fd.append('mypic', fileList[0]);			xhr.send(fd);					},false);	});	function init()	{		load_player();		tick_interval=500;                             //*** set the refresh interval in milliseconds		ticks_per_second=parseInt(1000/tick_interval);		refr=0;                   //*** turn the page refresh display update to "ON"		slider_back_width=360;    //*** width of the slider background (same as width of the video)		document.getElementById("slider_back").style.width=slider_back_width.toString()+"px";		progress_bar_width_max = slider_back_width - 10;		var idTmr = window.setInterval( "page_refresh()" , tick_interval ); //*** start the page refresh		//		//*** set up the drag-drop		//		var slider_object = document.getElementById("slider");		Drag.init(slider_object, null, 0, progress_bar_width_max, 0, 0);		slider_object.onDragStart=function(x,y){refr=1;};		slider_object.onDragEnd=function (x,y){tempf=x*frames_per_pixel;document.getElementById('fout').GotoFrame(tempf);  document.getElementById('fout').Play();refr=0;};		// 空格切换 暂停/播放		isPaused = false;		// https://stackoverflow.com/questions/6199038/javascript-event-triggered-by-pressing-space		$(window).keypress(function (e) {			if (e.keyCode === 0 || e.keyCode === 32) {				e.preventDefault()				if (isPaused) {					document.fout.Play(); isPaused = false;				} else {					document.fout.StopPlay(); isPaused = true;				}		    // console.log('Space pressed')		}	})	}	function page_refresh() //*** page refresh code	{	 //	 //*** stretch the load bar as the video is loaded ( 0 < pcl <100 )	 //	 pcl=window.document.fout.PercentLoaded();	 blue_width=parseFloat( pcl*progress_bar_width_max/100);	 document.getElementById("blue_bar").style.width=blue_width.toString()+"px";	//	//*** this updates the demomonstration IsPlaying() field	//	 // window.document.flashform.p1.value=document.fout.IsPlaying();	if (refr==0 && window.document.fout.IsPlaying()) //*** turn on/off updating while dragging	{		frames_per_pixel=( parseFloat( document.fout.TGetProperty("/",5) ) / parseFloat(progress_bar_width_max) );	 k1=window.document.fout.TGetProperty("/",4); //*** gets the current frame number	 k2=window.document.fout.TGetProperty("/",5); //*** gets the total frame count	 player_elapsed_seconds=parseInt(k1/25);      //*** assumes 25 frames per seconds to calculate the elapsed video time	 player_total_time=parseInt(k2/25); //*** assumes 25 frames per seconds to calculate the total video time	 pc1=parseInt(parseFloat(k1)/parseFloat(k2)*100.0); //*** calculates the % done	 pc2=parseInt(parseFloat(k1)/parseFloat(k2)*parseFloat(progress_bar_width_max));	 total_seconds=parseInt( parseInt(window.document.fout.TGetProperty("/",5)) / 25 );	 if ( pc2 > progress_bar_width_max) //*** update the progress bar	 {	 	document.getElementById("progress_bar").style.width = progress_bar_width_max.toString()+"px";	 	document.getElementById("slider").style.left = progress_bar_width_max.toString()+"px";	 }	 else	 {	 	document.getElementById("progress_bar").style.width = pc2.toString()+"px";	 	document.getElementById("slider").style.left = pc2.toString()+"px";	 }	//*** format the player statistics that appear below the progress bar	r=oc( "d2" , player_elapsed_seconds.toString() );	r=oc( "d3" , total_seconds.toString() );	r=oc( "d4" , k1.toString() );	r=oc( "d5" , k2.toString() );	r=oc( "d6" , parseInt(pc1).toString() );	//	//*** update all the demostration data	//	// window.document.flashform.p2.value=document.fout.PercentLoaded();	// window.document.flashform.p3.value=document.fout.TGetProperty("/",0);	// window.document.flashform.p4.value=document.fout.TGetProperty("/",1);	// window.document.flashform.p5.value=document.fout.TGetProperty("/",2);	// window.document.flashform.p6.value=document.fout.TGetProperty("/",3);	// window.document.flashform.p7.value=document.fout.TGetProperty("/",4);	// window.document.flashform.p8.value=document.fout.TGetProperty("/",5);	// window.document.flashform.p9.value=document.fout.TGetProperty("/",6);	// window.document.flashform.p10.value=document.fout.TGetProperty("/",7);	// window.document.flashform.p11.value=document.fout.TGetProperty("/",8);	// window.document.flashform.p12.value=document.fout.TGetProperty("/",9);	// window.document.flashform.p13.value=document.fout.TGetProperty("/",10);	// window.document.flashform.p14.value=document.fout.TGetProperty("/",11);	// window.document.flashform.p15.value=document.fout.TGetProperty("/",12);	// window.document.flashform.p16.value=document.fout.TGetProperty("/",13);	// window.document.flashform.p17.value=document.fout.TGetProperty("/",14);	// window.document.flashform.p18.value=document.fout.TGetProperty("/",15);}}	function oc(tid,content)  //*** cross browser innerHTML	{		if (document.layers){			sprite=document.layers[''+tid+''].document;			sprite.open();			sprite.write(content);			sprite.close();		}		else if (document.all) document.all[''+tid+''].innerHTML = content;		else if (document.getElementById){			rng = document.createRange();			el = document.getElementById(''+tid+'');			rng.setStartBefore(el);			htmlFrag = rng.createContextualFragment(content)			while(el.hasChildNodes()) el.removeChild(el.lastChild);			el.appendChild(htmlFrag);		}	}	// --></script><style type="text/css">	html {		height: 100%;		overflow: hidden; /* Hides scrollbar in IE */	}	body {		height: 100%;		margin: 0;		padding: 0;	}	#fout {		height: 80%;		font-size: 36px;		vertical-align: baseline;		text-align: center;		/*color: #d3d3d3;*/	}</style></head><body bgcolor="#cccccc" onLoad="init()" link="#0000ff" vlink="#0000ff">	<div id="fout" style="padding:15px">		拖拽到此区域	</div>	<table cellspacing="0" cellpadding="0" width="100%" border="0">		<tr><td height="15" width="100%" valign="top">			<div id="slider_back" style="text-align:left;z-index:10;position:absolute;background-color:#cccccc;border:1px solid black;height:10px;width:0px;">				<img id='blue_bar' align='texttop' style="position:absolute;top:0px;left:5px;z-index:12;" src="load_blue.gif" height="10" width="0">				<img id='progress_bar' align='texttop' style="position:absolute;top:0px;left:5px;z-index:15;" src="black1x1.gif" height="10" width="0">				<img id="slider" align="texttop" style="position:absolute;top:0px;left:0px;z-index:20;" src="soundtrack.gif">			</div>		</td></tr>		<tr><td valign="middle"  style='font-size:11px;'>			&nbsp;Elapsed Seconds:&nbsp;<span id="d2"></span>&nbsp;of&nbsp;<span id="d3"></span>&nbsp;Frames: <span id="d4"></span>&nbsp;of&nbsp;<span id="d5"></span>&nbsp;(<span id="d6"></span>% complete)		</td></tr>		<tr><td align="center">&nbsp;<br>			<input type="button" onClick="document.fout.StopPlay()" value="Pause">&nbsp;			<input type="button" onClick="document.fout.Play()" value="Play">&nbsp;			<input type="button" onClick="document.fout.Rewind()" value="Rewind">		</td></tr>	</table></body>